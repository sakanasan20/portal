<!DOCTYPE html>
<html lang="zh-Hant" xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="https://www.thymeleaf.org/extras/spring-security">
<body>
	<div class="container my-5">
		<button class="btn btn-secondary mb-3 back-home-btn">
			<i class="bi bi-arrow-left"></i> 返回首頁
		</button>

		<h2 class="mb-4">系統管理</h2>

		<ul class="nav nav-tabs mb-3" id="adminTabs" role="tablist">
			<li class="nav-item" role="presentation">
				<button class="nav-link active" data-bs-toggle="tab" data-bs-target="#users-tab" type="button">用戶</button>
			</li>
			<li class="nav-item" role="presentation">
				<button class="nav-link" data-bs-toggle="tab" data-bs-target="#roles-tab" type="button">角色</button>
			</li>
			<li class="nav-item" role="presentation">
				<button class="nav-link" data-bs-toggle="tab" data-bs-target="#auth-tab" type="button">權限</button>
			</li>
		</ul>

		<div class="tab-content">
			<div class="tab-pane fade show active" id="users-tab">
				<table class="table table-bordered" id="user-table">
					<thead>
						<tr>
							<th>帳號</th>
							<th>Email</th>
							<th>角色</th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="user : ${users}">
							<td th:text="${user.username}"></td>
							<td th:text="${user.email}"></td>
							<td>
								<span th:each="role : ${user.roles}"
									class="badge bg-primary me-1" 
									th:text="${role.name}"></span>
							</td>
						</tr>
					</tbody>
				</table>
			</div>

			<div class="tab-pane fade" id="roles-tab">
				<table class="table table-bordered" id="role-table">
					<thead>
						<tr>
							<th>角色名稱</th>
							<th>權限</th>
							<th>描述</th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="role : ${roles}">
							<td th:text="${role.name}"></td>
							<td>
								<span th:each="authority : ${role.authorities}"
									class="badge bg-primary me-1" 
									th:text="${authority.name}"></span>
							</td>
							<td th:text="${role.description}"></td>
						</tr>
					</tbody>
				</table>
			</div>

			<div class="tab-pane fade" id="auth-tab">
				<table class="table table-bordered" id="authority-table">
					<thead>
						<tr>
							<th>權限名稱</th>
							<th>描述</th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="authority : ${authorities}">
							<td th:text="${authority.name}"></td>
							<td th:text="${authority.description}"></td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
	</div>
</body>